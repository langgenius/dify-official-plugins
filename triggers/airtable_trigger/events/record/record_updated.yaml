identity:
  name: record_updated
  author: langgenius
  label:
    en_US: Record Updated
    zh_Hans: 记录更新
    ja_JP: レコード更新

description:
  en_US: Triggered when an existing record is updated in an Airtable table
  zh_Hans: 当 Airtable 表格中的现有记录被更新时触发
  ja_JP: Airtable テーブルの既存のレコードが更新されたときにトリガーされます

parameters:
- name: table_id
  label:
    en_US: Table ID Filter
    zh_Hans: 表格 ID 过滤
    ja_JP: テーブル ID フィルター
  type: string
  required: false
  help:
    en_US: Only trigger for records from this specific table ID. Leave empty to accept all tables.
    zh_Hans: 仅对来自此特定表格 ID 的记录触发。留空表示接受所有表格。
    ja_JP: この特定のテーブル ID のレコードのみトリガーします。空の場合は全テーブル受け入れます。

- name: changed_fields
  label:
    en_US: Changed Fields Filter
    zh_Hans: 变更字段过滤
    ja_JP: 変更フィールドフィルター
  type: string
  required: false
  help:
    en_US: Comma separated field names. Trigger only if any of these fields were changed.
    zh_Hans: 逗号分隔的字段名。仅当这些字段中的任何一个发生变化时触发。
    ja_JP: カンマ区切りのフィールド名。これらのフィールドのいずれかが変更された場合のみトリガーします。

- name: field_filter_name
  label:
    en_US: Field Filter Name
    zh_Hans: 字段过滤名称
    ja_JP: フィールドフィルター名
  type: string
  required: false
  help:
    en_US: Name of the field to filter by. Used with 'Field Filter Keywords'.
    zh_Hans: 用于过滤的字段名称。与"字段过滤关键词"配合使用。
    ja_JP: フィルタリングするフィールド名。「フィールドフィルターキーワード」と組み合わせて使用します。

- name: field_filter_keywords
  label:
    en_US: Field Filter Keywords
    zh_Hans: 字段过滤关键词
    ja_JP: フィールドフィルターキーワード
  type: string
  required: false
  help:
    en_US: Comma separated keywords. Trigger only if the specified field contains any keyword.
    zh_Hans: 逗号分隔的关键词。仅当指定字段包含任何关键词时触发。
    ja_JP: カンマ区切りのキーワード。指定されたフィールドにいずれかが含まれる場合のみトリガーします。

output_schema:
  type: object
  properties:
    base_id:
      type: string
      description: The ID of the base containing the record
    table_id:
      type: string
      description: The ID of the table containing the record
    record:
      type: object
      description: The updated record data
      properties:
        id:
          type: string
          description: Unique identifier for the record
        createdTime:
          type: string
          format: date-time
          description: Timestamp when the record was originally created
        fields:
          type: object
          description: Current field names and values of the record
          additionalProperties: true
    changed_fields:
      type: array
      description: List of field names that were changed
      items:
        type: string


extra:
  python:
    source: events/record/record_updated.py