identity:
  name: spotify_get_track
  author: Dify Developer
  label:
    en_US: Get Spotify Track
    zh_Hans: 获取 Spotify 歌曲
    ja_JP: Spotify 楽曲取得
  icon: icon.svg

description:
  human:
    en_US: Get detailed information about a specific Spotify track including audio features
    zh_Hans: 获取特定 Spotify 歌曲的详细信息，包括音频特征
    ja_JP: 特定の Spotify 楽曲の詳細情報（音響特徴含む）を取得します
  llm: Retrieve comprehensive information about a Spotify track including metadata, audio features, and album details

parameters:
  - name: track_id
    type: string
    required: true
    form: llm
    label:
      en_US: Track ID
      zh_Hans: 歌曲 ID
      ja_JP: 楽曲 ID
    human_description:
      en_US: The Spotify ID of the track to retrieve
      zh_Hans: 要获取的歌曲的 Spotify ID
      ja_JP: 取得する楽曲の Spotify ID
    llm_description: Spotify track ID (can be obtained from search results or Spotify URLs)

  - name: market
    type: string
    required: false
    default: "US"
    form: llm
    label:
      en_US: Market/Country
      zh_Hans: 市场/国家
      ja_JP: マーケット/国
    human_description:
      en_US: ISO 3166-1 alpha-2 country code (e.g., US, GB, JP)
      zh_Hans: ISO 3166-1 alpha-2 国家代码（例如 US、GB、JP）
      ja_JP: ISO 3166-1 alpha-2 国コード（例：US、GB、JP）
    llm_description: Market/country code to filter track availability

extra:
  python:
    source: tools/spotify_get_track.py

output_schema:
  type: object
  properties:
    id:
      type: string
      description: Spotify track ID
    name:
      type: string
      description: Track name
    duration_ms:
      type: integer
      description: Track duration in milliseconds
    explicit:
      type: boolean
      description: Whether the track has explicit content
    popularity:
      type: integer
      description: Track popularity score (0-100)
    preview_url:
      type: string
      description: URL to 30-second preview (if available)
    track_number:
      type: integer
      description: Track number in the album
    disc_number:
      type: integer
      description: Disc number (for multi-disc albums)
    is_local:
      type: boolean
      description: Whether the track is a local file
    artists:
      type: array
      description: List of track artists
      items:
        type: object
        properties:
          id:
            type: string
            description: Artist Spotify ID
          name:
            type: string
            description: Artist name
          external_urls:
            type: object
            description: External URLs for the artist
    album:
      type: object
      description: Album information
      properties:
        id:
          type: string
          description: Album Spotify ID
        name:
          type: string
          description: Album name
        album_type:
          type: string
          description: Type of album
        release_date:
          type: string
          description: Album release date
        total_tracks:
          type: integer
          description: Total tracks in album
        images:
          type: array
          description: Album cover images
        external_urls:
          type: object
          description: External URLs for the album
    external_urls:
      type: object
      description: External URLs for the track
    external_ids:
      type: object
      description: External IDs for the track (ISRC, etc.)
    available_markets:
      type: array
      description: Markets where the track is available
    audio_features:
      type: object
      description: Audio analysis features (if available)
      properties:
        danceability:
          type: number
          description: Danceability score (0.0-1.0)
        energy:
          type: number
          description: Energy score (0.0-1.0)
        key:
          type: integer
          description: Musical key (-1 to 11)
        loudness:
          type: number
          description: Loudness in decibels
        mode:
          type: integer
          description: Modality (0 = minor, 1 = major)
        speechiness:
          type: number
          description: Speechiness score (0.0-1.0)
        acousticness:
          type: number
          description: Acousticness score (0.0-1.0)
        instrumentalness:
          type: number
          description: Instrumentalness score (0.0-1.0)
        liveness:
          type: number
          description: Liveness score (0.0-1.0)
        valence:
          type: number
          description: Valence/positivity score (0.0-1.0)
        tempo:
          type: number
          description: Tempo in beats per minute
        time_signature:
          type: integer
          description: Time signature (3-7)
