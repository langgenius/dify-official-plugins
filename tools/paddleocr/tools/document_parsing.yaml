identity:
  name: document_parsing
  author: langgenius
  label:
    en_US: Document Parsing
    zh_Hans: 文档解析
description:
  human:
    en_US: PaddleOCR document parsing tool, capable of extracting tables, formulas, seals, and other information from documents while preserving the original layout
    zh_Hans: PaddleOCR 文档解析工具，能够提取文档中的表格、公式、印章等信息，同时保留原始版面结构
  llm: PaddleOCR document parsing tool, capable of extracting tables, formulas, seals, and other information from documents while preserving the original layout
parameters:
  - name: file
    type: string
    required: true
    label:
      en_US: File
      zh_Hans: 文件
    human_description:
      en_US: The URL of an image or PDF file, or the Base64-encoded result of the content of such a file. The URL must be publicly accessible.
      zh_Hans: 图像文件或 PDF 文件的 URL，或上述类型文件内容的 Base64 编码结果。URL 必须是公网可访问的。
    llm_description: The URL of an image or PDF file, or the Base64-encoded result of the content of such a file. The URL must be publicly accessible.
    form: llm
  - name: fileType
    type: select
    required: false
    default: auto
    options:
      - label:
          en_US: Auto Detect
          zh_Hans: 自动检测
        value: auto
      - label:
          en_US: PDF
          zh_Hans: PDF
        value: pdf
      - label:
          en_US: Image
          zh_Hans: 图片
        value: image
    label:
      en_US: File Type
      zh_Hans: 文件类型
    human_description:
      en_US: File type. "Auto Detect" will infer the type from URL, "PDF" for PDF files, "Image" for image files.
      zh_Hans: 文件类型。"自动检测" 将根据 URL 推断类型，"PDF" 表示 PDF 文件，"图片" 表示图像文件。
    llm_description: File type. "auto" will infer the type from URL, "pdf" for PDF files, "image" for image files.
    form: llm
  - name: useDocOrientationClassify
    type: boolean
    required: false
    default: false
    label:
      en_US: Whether to Enable Document Orientation Classification
      zh_Hans: 是否启用文档方向分类
    human_description:
      en_US: Whether to enable the document orientation classification function. Enabling this feature allows the input image to be automatically rotated to the correct orientation.
      zh_Hans: 是否启用文档方向分类功能。启用该功能可以将输入图像自动转正。
    llm_description: Whether to enable the document orientation classification function. Enabling this feature allows the input image to be automatically rotated to the correct orientation. Keep this feature disabled unless the user ask for it.
    form: llm
  - name: useDocUnwarping
    type: boolean
    required: false
    default: false
    label:
      en_US: Whether to Enable Text Image Unwarping
      zh_Hans: 是否启用文本图像矫正
    human_description:
      en_US: Whether to enable the text image unwarping function. Enabling this feature allows automatic correction of distorted text images.
      zh_Hans: 是否启用文本图像矫正功能。启用该功能可以对发生畸变的文本图像进行自动矫正。
    llm_description: Whether to enable the text image unwarping function. Enabling this feature allows automatic correction of distorted text images. Keep this feature disabled unless the user ask for it.
    form: llm
  - name: useTextlineOrientation
    type: boolean
    required: false
    default: true
    label:
      en_US: Whether to Enable Text Line Orientation Classification
      zh_Hans: 是否启用文本行方向分类
    human_description:
      en_US: Whether to enable the text line orientation classification function. Enabling this feature allows automatic orientation correction for each recognized text line.
      zh_Hans: 是否启用文本行方向分类功能。启用该功能可以自动对识别到的每个文本行进行方向转正。
    llm_description: Whether to enable the text line orientation classification function. Enabling this feature allows automatic orientation correction for each recognized text line.
    form: llm
  - name: useSealRecognition
    type: boolean
    required: false
    default: false
    label:
      en_US: Whether to Enable Seal Recognition
      zh_Hans: 是否启用印章文本识别
    human_description:
      en_US: Whether to enable the seal recognition function.
      zh_Hans: 是否启用印章文本识别功能。
    llm_description: Whether to enable the seal recognition function.
    form: llm
  - name: useTableRecognition
    type: boolean
    required: false
    default: true
    label:
      en_US: Whether to Enable Table Recognition
      zh_Hans: 是否启用表格识别
    human_description:
      en_US: Whether to enable the table recognition function.
      zh_Hans: 是否启用表格识别功能。
    llm_description: Whether to enable the table recognition function.
    form: llm
  - name: useFormulaRecognition
    type: boolean
    required: false
    default: true
    label:
      en_US: Whether to Enable Formula Recognition
      zh_Hans: 是否启用公式识别
    human_description:
      en_US: Whether to enable the formula recognition function.
      zh_Hans: 是否启用公式识别功能。
    llm_description: Whether to enable the formula recognition function.
    form: llm
  - name: useChartRecognition
    type: boolean
    required: false
    default: false
    label:
      en_US: Whether to Enable Chart Recognition
      zh_Hans: 是否启用图表识别
    human_description:
      en_US: Whether to enable the chart recognition function (to recognize line charts, bar charts, etc.).
      zh_Hans: 是否启用图表识别功能（识别折线图、柱状图等）。
    llm_description: Whether to enable the chart recognition function (to recognize line charts, bar charts, etc.).
    form: llm
  - name: useRegionDetection
    type: boolean
    required: false
    default: true
    label:
      en_US: Whether to Enable Region Detection
      zh_Hans: 是否启用区域检测
    human_description:
      en_US: Whether to enable the region detection function.
      zh_Hans: 是否启用区域检测功能。
    llm_description: Whether to enable the region detection function.
    form: llm
  - name: formatBlockContent
    type: boolean
    required: false
    default: false
    label:
      en_US: Whether to Format Block Content
      zh_Hans: 是否格式化块内容
    human_description:
      en_US: Whether to convert the block content into Markdown format.
      zh_Hans: 是否将块内容转换为 Markdown 格式。
    llm_description: Whether to convert the block content into Markdown format.
    form: llm
  - name: layoutNms
    type: boolean
    required: false
    default: true
    label:
      en_US: Whether to Perform NMS on Layout Detection Results
      zh_Hans: 是否对版面检测结果进行 NMS
    human_description:
      en_US: Whether to perform NMS on layout detection results.
      zh_Hans: 是否对版面检测结果进行 NMS。
    llm_description: Whether to perform NMS on layout detection results.
    form: llm
  - name: textDetLimitSideLen
    type: number
    required: false
    default: 64
    label:
      en_US: Image Side Length Limit for Text Detection
      zh_Hans: 文本检测的图像边长限制
    human_description:
      en_US: Image side length limit for text detection.
      zh_Hans: 文本检测的图像边长限制。
    llm_description: Image side length limit for text detection.
    form: llm
  - name: textDetLimitType
    type: select
    required: false
    default: min
    options:
      - label: 
          en_US: min
        value: min
      - label:
          en_US: max
        value: max
    label:
      en_US: Type of Side Length Limit for Text Detection
      zh_Hans: 文本检测的边长度限制类型
    human_description:
      en_US: Type of side length limit for text detection. Supports "min" or "max", indicating that the shortest side of the image will be no less than `textDetLimitSideLen`, or the longest side will be no greater than `textDetLimitSideLen`, respectively.
      zh_Hans: 文本检测的边长度限制类型。支持为"min"或者"max"，分别表示保证图像最短边不小于`textDetLimitSideLen`和保证图像最长边不大于`textDetLimitSideLen`。
    llm_description: Type of side length limit for text detection. Supports "min" or "max", indicating that the shortest side of the image will be no less than `textDetLimitSideLen`, or the longest side will be no greater than `textDetLimitSideLen`, respectively.
    form: llm
  - name: textDetThresh
    type: number
    required: false
    default: 0.3
    label:
      en_US: Text Detection Pixel Threshold
      zh_Hans: 文本检测像素阈值
    human_description:
      en_US: Pixel threshold for text detection. In the output probability map, only pixels with scores higher than this threshold are considered text pixels.
      zh_Hans: 文本检测像素阈值。输出的概率图中，得分大于该阈值的像素点才会被认为是文字像素点。
    llm_description: Pixel threshold for text detection. In the output probability map, only pixels with scores higher than this threshold are considered text pixels.
    form: llm
  - name: textDetBoxThresh
    type: number
    required: false
    default: 0.6
    label:
      en_US: Text Detection Box Threshold
      zh_Hans: 文本检测框阈值
    human_description:
      en_US: Bounding box threshold for text detection. A detected box is considered a text region if the average score of all pixels within the box exceeds this threshold.
      zh_Hans: 文本检测框阈值。检测结果边框内，所有像素点的平均得分大于该阈值时，该结果会被认为是文字区域。
    llm_description: Bounding box threshold for text detection. A detected box is considered a text region if the average score of all pixels within the box exceeds this threshold.
    form: llm
  - name: textDetUnclipRatio
    type: number
    required: false
    default: 1.5
    label:
      en_US: Text Detection Unclipping Ratio
      zh_Hans: 文本检测扩张系数
    human_description:
      en_US: Unclipping ratio for text detection. When unclipping text regions, a larger value results in a greater unclipping area.
      zh_Hans: 文本检测扩张系数。对文字区域进行扩张时，该值越大，扩张的面积越大。
    llm_description: Unclipping ratio for text detection. When unclipping text regions, a larger value results in a greater unclipping area.
    form: llm
  - name: textRecScoreThresh
    type: number
    required: false
    default: 0.0
    label:
      en_US: Text Recognition Threshold
      zh_Hans: 文本识别阈值
    human_description:
      en_US: Threshold for text recognition. Text results with scores higher than this threshold will be retained.
      zh_Hans: 文本识别阈值。得分大于该阈值的文本结果会被保留。
    llm_description: Threshold for text recognition. Text results with scores higher than this threshold will be retained.
    form: llm
  - name: sealDetLimitSideLen
    type: number
    required: false
    default: 736
    label:
      en_US: Image Side Length Limit for Seal Text Detection
      zh_Hans: 印章文本检测的图像边长限制
    human_description:
      en_US: Image side length limit for seal text detection.
      zh_Hans: 印章文本检测的图像边长限制。
    llm_description: Image side length limit for seal text detection.
    form: llm
  - name: sealDetLimitType
    type: select
    required: false
    default: min
    options:
      - label: 
          en_US: min
        value: min
      - label:
          en_US: max
        value: max
    label:
      en_US: Type of Side Length Limit for Seal Text Detection
      zh_Hans: 印章文本检测的边长度限制类型
    human_description:
      en_US: Type of side length limit for seal text detection. Supports "min" or "max", indicating that the shortest side of the image will be no less than `sealDetLimitSideLen`, or the longest side will be no greater than `sealDetLimitSideLen`, respectively.
      zh_Hans: 印章文本检测的边长度限制类型。支持为"min"或者"max"，分别表示保证图像最短边不小于`sealDetLimitSideLen`和保证图像最长边不大于`sealDetLimitSideLen`。
    llm_description: Type of side length limit for seal text detection. Supports "min" or "max", indicating that the shortest side of the image will be no less than `sealDetLimitSideLen`, or the longest side will be no greater than `sealDetLimitSideLen`, respectively.
    form: llm
  - name: sealDetThresh
    type: number
    required: false
    default: 0.2
    label:
      en_US: Seal Text Detection Pixel Threshold
      zh_Hans: 印章文本检测像素阈值
    human_description:
      en_US: Pixel threshold for seal text detection. In the output probability map, only pixels with scores higher than this threshold are considered text pixels.
      zh_Hans: 印章文本检测像素阈值。输出的概率图中，得分大于该阈值的像素点才会被认为是文字像素点。
    llm_description: Pixel threshold for seal text detection. In the output probability map, only pixels with scores higher than this threshold are considered text pixels.
    form: llm
  - name: sealDetBoxThresh
    type: number
    required: false
    default: 0.6
    label:
      en_US: Seal Text Detection Box Threshold
      zh_Hans: 印章文本检测框阈值
    human_description:
      en_US: Bounding box threshold for seal text detection. A detected box is considered a text region if the average score of all pixels within the box exceeds this threshold.
      zh_Hans: 印章文本检测框阈值。检测结果边框内，所有像素点的平均得分大于该阈值时，该结果会被认为是文字区域。
    llm_description: Bounding box threshold for seal text detection. A detected box is considered a text region if the average score of all pixels within the box exceeds this threshold.
    form: llm
  - name: sealDetUnclipRatio
    type: number
    required: false
    default: 0.5
    label:
      en_US: Seal Text Detection Unclipping Ratio
      zh_Hans: 印章文本检测扩张系数
    human_description:
      en_US: Unclipping ratio for seal text detection. When unclipping text regions, a larger value results in a greater unclipping area.
      zh_Hans: 印章文本检测扩张系数。对文字区域进行扩张时，该值越大，扩张的面积越大。
    llm_description: Unclipping ratio for seal text detection. When unclipping text regions, a larger value results in a greater unclipping area.
    form: llm
  - name: sealRecScoreThresh
    type: number
    required: false
    default: 0.0
    label:
      en_US: Seal Text Recognition Threshold
      zh_Hans: 印章文本识别阈值
    human_description:
      en_US: Threshold for seal text recognition. Text results with scores higher than this threshold will be retained.
      zh_Hans: 印章文本识别阈值。得分大于该阈值的文本结果会被保留。
    llm_description: Threshold for seal text recognition. Text results with scores higher than this threshold will be retained.
    form: llm
  - name: useWiredTableCellsTransToHtml
    type: boolean
    required: false
    default: false
    label:
      en_US: Whether to Transform Wired Table Cell Detection Results to HTML Directly
      zh_Hans: 是否将有线表单元格检测结果直转为 HTML
    human_description:
      en_US: Whether to transform wired table cell detection results to HTML directly.
      zh_Hans: 是否将有线表单元格检测结果直转为 HTML。
    llm_description: Whether to transform wired table cell detection results to HTML directly.
    form: llm
  - name: useWirelessTableCellsTransToHtml
    type: boolean
    required: false
    default: false
    label:
      en_US: Whether to Transform Wireless Table Cell Detection Results to HTML Directly
      zh_Hans: 是否将无线表单元格检测结果直转为 HTML
    human_description:
      en_US: Whether to transform wireless table cell detection results to HTML directly.
      zh_Hans: 是否将无线表单元格检测结果直转为 HTML。
    llm_description: Whether to transform wireless table cell detection results to HTML directly.
    form: llm
  - name: useTableOrientationClassify
    type: boolean
    required: false
    default: true
    label:
      en_US: Whether to Enable Table Orientation Classification
      zh_Hans: 是否启用表格方向分类
    human_description:
      en_US: Whether to enable table orientation classification. When enabled, it can automatically correct the orientation when tables in the image are rotated by 90, 180, or 270 degrees.
      zh_Hans: 是否启用表格方向识别。启用时，当图像中的表格存在 90 / 180 / 270 度旋转时，能够自动进行方向校正。
    llm_description: Whether to enable table orientation classification. When enabled, it can automatically correct the orientation when tables in the image are rotated by 90, 180, or 270 degrees.
    form: llm
  - name: useOcrResultsWithTableCells
    type: boolean
    required: false
    default: true
    label:
      en_US: Whether to Enable OCR Within Cell Segmentation
      zh_Hans: 是否启用单元格切分 OCR
    human_description:
      en_US: Whether to enable OCR within cell segmentation. When enabled, text detection results will be segmented and re-recognized based on cell prediction results to avoid text loss.
      zh_Hans: 是否启用单元格切分 OCR。启用时，会基于单元格预测结果对文本检测结果进行切分和重识别，避免出现文字缺失情况。
    llm_description: Whether to enable OCR within cell segmentation. When enabled, text detection results will be segmented and re-recognized based on cell prediction results to avoid text loss.
    form: llm
  - name: useE2eWiredTableRecModel
    type: boolean
    required: false
    default: false
    label:
      en_US: Whether to Enable End-to-End Wired Table Recognition Mode
      zh_Hans: 是否启用有线表端到端表格识别模式
    human_description:
      en_US: Whether to enable end-to-end wired table recognition mode. When enabled, the cell detection model will not be used, and only the table structure recognition model will be used.
      zh_Hans: 是否启用有线表端到端表格识别模式。启用时，不使用单元格检测模型，只使用表格结构识别模型。
    llm_description: Whether to enable end-to-end wired table recognition mode. When enabled, the cell detection model will not be used, and only the table structure recognition model will be used.
    form: llm
  - name: useE2eWirelessTableRecModel
    type: boolean
    required: false
    default: true
    label:
      en_US: Whether to Enable End-to-End Wireless Table Recognition Mode
      zh_Hans: 是否启用无线表端到端表格识别模式
    human_description:
      en_US: Whether to enable end-to-end wireless table recognition mode. When enabled, the cell detection model will not be used, and only the table structure recognition model will be used.
      zh_Hans: 是否启用无线表端到端表格识别模式。启用时，不使用单元格检测模型，只使用表格结构识别模型。
    llm_description: Whether to enable end-to-end wireless table recognition mode. When enabled, the cell detection model will not be used, and only the table structure recognition model will be used.
    form: llm
  - name: markdownIgnoreLabels
    type: string
    required: false
    label:
      en_US: Labels to Ignore in Markdown Output
      zh_Hans: Markdown 输出中忽略的标签
    human_description:
      en_US: 'Comma-separated list of labels to ignore when generating Markdown output. For example: "header,footer,page_number".'
      zh_Hans: '生成 Markdown 输出时要忽略的标签列表，使用逗号分隔。例如："header,footer,page_number"。'
    llm_description: 'Comma-separated list of labels to ignore when generating Markdown output. For example: "header,footer,page_number".'
    form: llm
  - name: prettifyMarkdown
    type: boolean
    required: false
    default: true
    label:
      en_US: Whether to Prettify the Output Markdown Text
      zh_Hans: 是否美化输出的 Markdown 文本
    human_description:
      en_US: Whether to prettify the output Markdown text.
      zh_Hans: 是否美化输出的 Markdown 文本。
    llm_description: Whether to prettify the output Markdown text.
    form: llm
  - name: showFormulaNumber
    type: boolean
    required: false
    default: false
    label:
      en_US: Whether to Include Formula Numbers in the Output Markdown Text
      zh_Hans: 是否在输出的 Markdown 文本中包含公式编号
    human_description:
      en_US: Whether to include formula numbers in the output markdown text.
      zh_Hans: 是否在输出的 Markdown 文本中包含公式编号。
    llm_description: Whether to include formula numbers in the output markdown text.
    form: llm
  - name: visualize
    type: boolean
    required: false
    default: false
    label:
      en_US: Whether to Return Visualization Results
      zh_Hans: 是否返回可视化结果
    human_description:
      en_US: Whether or not to return visualization results.
      zh_Hans: 是否返回可视化结果。
    llm_description: Whether or not to return visualization results.
    form: llm
output_schema:
    type: object
    properties:
      images:
        type: array
        items:
          type: object
        description: The images extracted from the file.
extra:
  python:
    source: tools/document_parsing.py
